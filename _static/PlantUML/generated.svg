<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="331px" preserveAspectRatio="none" style="width:573px;height:331px;background:#FFFFFF;" version="1.1" viewBox="0 0 573 331" width="573px" zoomAndPan="magnify"><defs><filter height="300%" id="f1y28t6aa96rf6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="28" x2="28" y1="43.1201" y2="285.4009"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="214" x2="214" y1="43.1201" y2="285.4009"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="456" x2="456" y1="43.1201" y2="285.4009"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="526" x2="526" y1="43.1201" y2="285.4009"/><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="42" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="12" y="28.0439">用户</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="42" x="5" y="284.4009"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="12" y="307.4448">用户</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="70" x="177" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="184" y="28.0439">认证中心</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="70" x="177" y="284.4009"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="184" y="307.4448">认证中心</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="42" x="433" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="440" y="28.0439">缓存</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="42" x="433" y="284.4009"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="440" y="307.4448">缓存</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="70" x="489" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="496" y="28.0439">其他服务</text><rect fill="#FEFECE" filter="url(#f1y28t6aa96rf6)" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="70" x="489" y="284.4009"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="496" y="307.4448">其他服务</text><polygon fill="#A80036" points="202,72.8745,212,76.8745,202,80.8745,206,76.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="208" y1="76.8745" y2="76.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="35" y="72.0181">登录操作</text><polygon fill="#A80036" points="444,104.6289,454,108.6289,444,112.6289,448,108.6289" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="214" x2="450" y1="108.6289" y2="108.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="221" y="103.7725">存放(key=token+ip,value=token)token</text><polygon fill="#A80036" points="39,136.3833,29,140.3833,39,144.3833,35,140.3833" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="213" y1="140.3833" y2="140.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="45" y="135.5269">认证成功返回token</text><polygon fill="#A80036" points="202,168.1377,212,172.1377,202,176.1377,206,172.1377" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="28" x2="208" y1="172.1377" y2="172.1377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="35" y="167.2813">下次访问头部携带token认证</text><polygon fill="#A80036" points="225,199.8921,215,203.8921,225,207.8921,221,203.8921" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="219" x2="455" y1="203.8921" y2="203.8921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="231" y="199.0356">key=token+ip获取token</text><polygon fill="#A80036" points="514,231.6465,524,235.6465,514,239.6465,518,235.6465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="214" x2="520" y1="235.6465" y2="235.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="221" y="230.79">存在且校验成功则跳转到用户请求的其他服务</text><polygon fill="#A80036" points="39,263.4009,29,267.4009,39,271.4009,35,267.4009" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="33" x2="525" y1="267.4009" y2="267.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="45" y="262.5444">信息</text><!--MD5=[9413b0b9163110f8ec3d242fb2b951b4]
@startuml 测试
用户 -> 认证中心: 登录操作
认证中心 -> 缓存: 存放(key=token+ip,value=token)token
用户 <- 认证中心 : 认证成功返回token
用户 -> 认证中心: 下次访问头部携带token认证
认证中心 <- 缓存: key=token+ip获取token
其他服务 <- 认证中心: 存在且校验成功则跳转到用户请求的其他服务
其他服务 -> 用户: 信息
@enduml

PlantUML version 1.2021.10(Mon Aug 30 21:43:48 CST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>